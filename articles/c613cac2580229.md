---
title: "CSSã‚«ã‚¹ã‚±ãƒ¼ãƒ‰ ~ã‚«ã‚¹ã‚±ãƒ¼ãƒ‰ãƒ¬ã‚¤ãƒ¤ãƒ¼~"
emoji: "ğŸ”¥"
type: "tech" # tech: æŠ€è¡“è¨˜äº‹ / idea: ã‚¢ã‚¤ãƒ‡ã‚¢
topics: ["css"]
published: true
---

[å‰å›](https://zenn.dev/hoshito/articles/762d1064abf2f9)ã®ç¶šã

## ã‚«ã‚¹ã‚±ãƒ¼ãƒ‰ãƒ¬ã‚¤ãƒ¤ãƒ¼ã¨ã¯

ã‚«ã‚¹ã‚±ãƒ¼ãƒ‰ãƒ¬ã‚¤ãƒ¤ãƒ¼ã¨ã¯ã€CSSã®ã‚¹ã‚¿ã‚¤ãƒ«é©ç”¨é †åºã‚’ã‚ˆã‚Šç´°ã‹ãåˆ¶å¾¡ã™ã‚‹ãŸã‚ã«å°å…¥ã•ã‚ŒãŸã—ãã¿ã®ã“ã¨ã€‚

å¾“æ¥ã®å•é¡Œã¨ã—ã¦ã€è¤‡æ•°ã®ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã‚„ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã€ãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£ CSS ã‚’ä½µç”¨ã™ã‚‹ã¨ãã€ã©ã®ãƒ«ãƒ¼ãƒ«ãŒå„ªå…ˆã•ã‚Œã‚‹ã‹ãŒè¤‡é›‘ã«ãªã‚Šã€æ„å›³ã›ãšã‚¹ã‚¿ã‚¤ãƒ«ãŒä¸Šæ›¸ãã•ã‚ŒãŸã‚Šã™ã‚‹ã“ã¨ãŒã‚ã£ãŸã€‚

ã“ã‚Œã‚’è§£æ±ºã™ã‚‹ãŸã‚ã®ã—ãã¿ã¨ã—ã¦ã‚«ã‚¹ã‚±ãƒ¼ãƒ‰ãƒ¬ã‚¤ãƒ¤ãƒ¼ãŒã‚ã‚‹ã€‚

### MDNã®ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ
- https://developer.mozilla.org/ja/docs/Learn_web_development/Core/Styling_basics/Cascade_layers
- https://developer.mozilla.org/ja/docs/Web/CSS/@layer

## æ›¸ãæ–¹

`@layer`ã§ãƒ¬ã‚¤ãƒ¤ãƒ¼ã‚’å®šç¾©ã™ã‚‹ã€‚

```css
/* ãƒ¬ã‚¤ãƒ¤ãƒ¼å®šç¾©ï¼ˆé †åºãŒãã®ã¾ã¾å„ªå…ˆé †ä½ï¼‰ */
@layer base, components, utilities;

/* å„ãƒ¬ã‚¤ãƒ¤ãƒ¼ã«ã‚¹ã‚¿ã‚¤ãƒ«ã‚’å‰²ã‚Šå½“ã¦ */
@layer base {
  html { font-size: 16px; }
  a { color: blue; }
}

@layer components {
  .btn { padding: 0.5em 1em; border-radius: 4px; }
}

@layer utilities {
  .text-center { text-align: center; }
}
```

å…¥ã‚Œå­ã«ã™ã‚‹ã“ã¨ã‚‚å¯èƒ½ã€‚
```css
@layer base, base.nested-components, base.nested-components2;

@layer base {
  @layer nested-components {
    html { font-size: 16px; }
    a { color: blue; }
  }
  @layer nested-components2 {
    .btn { padding: 0.5em 1em; border-radius: 4px; }
  }
}
```
## ãƒ¡ãƒªãƒƒãƒˆ

- å¤§ããªãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã§ã€Œå…±é€šãƒ™ãƒ¼ã‚¹ â†’ ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ â†’ ãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£ã€ã¨ã„ã£ãŸã‚¹ã‚¿ã‚¤ãƒ«éšå±¤ã‚’æ˜ç¢ºåŒ–
- æ„å›³ã—ãªã„ä¸Šæ›¸ããŒèµ·ã“ã‚Šã«ããç®¡ç†ãŒæ¥½ã«

## æ´»ç”¨æ–¹æ³•

`@import`ã¨çµ„ã¿åˆã‚ã›ã‚‹ã“ã¨ã§ã€å¤–éƒ¨ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã‚’ãƒ™ãƒ¼ã‚¹ã¨ã—ã¦ã‚¹ã‚¿ã‚¤ãƒªãƒ³ã‚°ã™ã‚‹ã“ã¨ãŒå®¹æ˜“ã«ãªã‚‹ã€‚
```css
@layer external;
@import url('https://example.com/external-library.css') layer(external);

/* è‡ªåˆ†ã®ã‚¹ã‚¿ã‚¤ãƒ«ã§ä¸Šæ›¸ã */
@layer custom, utilities;

@layer custom {
  /* ç•¥ */
}

/* utilities ãƒ¬ã‚¤ãƒ¤ãƒ¼ã®ã‚¹ã‚¿ã‚¤ãƒ« */
@layer utilities {
  /* ç•¥ */
}
```

`@media`ã‚„`@supports`ãªã©ã¨çµ„ã¿åˆã‚ã›ã‚‹ã“ã¨ã§ã€ç‰¹å®šæ¡ä»¶ä¸‹ã®ã¿ã«ãƒ¬ã‚¤ãƒ¤ãƒ¼ã‚’è¨­å®šã™ã‚‹ã“ã¨ãŒã§ãã‚‹ã€‚

```css
/* ãƒ€ãƒ¼ã‚¯ãƒ¢ãƒ¼ãƒ‰ã®ã¨ãã®ã¿é©ç”¨ */
@media (prefers-color-scheme: dark) {
  @layer theme {
    body { background: #222; color: #eee; }
  }
}
```
## ç´°ã‹ã„ä»•æ§˜

https://developer.mozilla.org/en-US/play ã§ã‚‚å®Ÿéš›ã«è©¦ã—ã¦ã¿ã‚‹ã¨è‰¯ã„ã€‚

### `@layer`ã¯æœ€ä¸Šä½ã«æ›¸ã‹ãªãã¦ã‚‚è‰¯ã„
```css
body { font-size: 16px }

/* ã“ã“ã§å®£è¨€ã—ã¦ã‚‚æœ‰åŠ¹ */
@layer base, components;

@layer base {
  /* ç•¥ */
}

@layer components {
  /* ç•¥ */
}
```

### ä¸¦ã¹ã¦å®£è¨€ã—ãªãã¦ã‚‚è‰¯ã„
```css
/* æœ€ä¸Šä½ã« @layer base, components ã¨æ›¸ã„ãŸã¨ãã¨åŒã˜å„ªå…ˆé †ä½ */
@layer base {
  /* ç•¥ */
}

body { font-size: 16px }

@layer components {
  /* ç•¥ */
}
```

### åŒ¿åã®ãƒ¬ã‚¤ãƒ¤ãƒ¼ã‚’ã¤ãã‚‹ã“ã¨ãŒã§ãã‚‹
```css
/* æœ€å¾Œã«æ›¸ã„ãŸãƒ¬ã‚¤ãƒ¤ãƒ¼ãŒå„ªå…ˆã•ã‚Œã‚‹ãŸã‚ã€æ–‡å­—è‰²ã¯greenã«ãªã‚‹ */
@layer base {
  body { color: red; }
}

@layer { /* åŒ¿åãƒ¬ã‚¤ãƒ¤ãƒ¼ */
  body { color: green;  }
}
```

### å†å®£è¨€ã™ã‚‹ã“ã¨ãŒã§ãã‚‹
```css
/* æ–‡å­—è‰²ãŒblueã§ä¸‹ç·šãŒå¼•ã‹ã‚ŒãŸçŠ¶æ…‹ã«ãªã‚‹ */
@layer base {
  body { color: red; text-decoration: underline; }
}

@layer base {
  body { color: blue; }
}
```

### ä¸€åº¦å®£è¨€ã—ãŸãƒ¬ã‚¤ãƒ¤ãƒ¼ã®é †ç•ªã‚’ä¸¦ã³æ›¿ãˆã‚‹ã“ã¨ã¯ã§ããªã„
```css
/* æ–‡å­—è‰²ãŒgreen, ä¸Šç·šãŒå¼•ã‹ã‚ŒãŸçŠ¶æ…‹ã«ãªã‚‹ */
@layer base {
  body { color: red; text-decoration: underline; }
}

@layer components {
  body { color: green; }
}

@layer base {
  body { color: blue; text-decoration: overline; }
}

/* ä¸‹ã®ã‚ˆã†ã«æ›¸ã„ãŸã®ã¨åŒã˜ 
@layer base {
  body { color: red; text-decoration: underline; }
  body { color: blue; text-decoration: overline; }
}

@layer components {
  body { color: green; }
}
*/
```

### ãƒ¬ã‚¤ãƒ¤ãƒ¼å¤–ã®ã‚¹ã‚¿ã‚¤ãƒ«ãŒæœ€å„ªå…ˆã§é©ç”¨ã•ã‚Œã‚‹
```css
/* æ–‡å­—è‰²ã¯blue, ä¸Šç·šãŒå¼•ã‹ã‚ŒãŸçŠ¶æ…‹ã«ãªã‚‹ */
@layer base {
  body { color: red; }
}

body { color: blue; }

@layer {
  body { color: yellow; text-decoration: underline; }
}

@layer components {
  body { color: black; text-decoration: overline; }
}

@layer {
  body { color: green;  }
}
```

å…¥ã‚Œå­ã®çŠ¶æ…‹ã§ã‚‚ä¼¼ãŸã‚ˆã†ãªäº‹è±¡ã‚’ç¢ºèªã§ãã‚‹ã€‚
```css
/* æ–‡å­—è‰²ã¯blue, ä¸Šç·šãŒå¼•ã‹ã‚ŒãŸçŠ¶æ…‹ã«ãªã‚‹ */
@layer base {
  body { color: blue; }
  @layer nested-components {
    body { color: yellow; text-decoration: underline; }
  }
  @layer nested-components2 {
    body { color: black; text-decoration: overline; }
  }
}
```
